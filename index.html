<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ‡¨ğŸ‡º Cuba Market ğŸ›’</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f7f7f7;
    color:#222;
}
header{
    background:linear-gradient(90deg,#e60000,#ffcc00);
    padding:20px;
    text-align:center;
    font-size:32px;
    font-weight:bold;
    color:white;
    text-shadow:0 0 8px black;
}
.info{
    text-align:center;
    padding:10px;
    font-size:18px;
}
.searchBox{
    text-align:center;
    margin:15px;
}
.searchBox input{
    width:80%;
    max-width:500px;
    padding:12px;
    border-radius:12px;
    border:2px solid #ffcc00;
    font-size:16px;
}
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:15px;
    padding:20px;
}
.card{
    background:white;
    border-radius:18px;
    padding:15px;
    box-shadow:0 0 10px rgba(0,0,0,0.2);
    text-align:center;
    transition:0.3s;
}
.card:hover{
    transform:scale(1.05);
}
.card img{
    width:90px;
    height:90px;
}
.card button{
    margin-top:10px;
    padding:10px 15px;
    border:none;
    border-radius:12px;
    background:#ffcc00;
    font-weight:bold;
    cursor:pointer;
}
.card button:hover{
    background:#ffaa00;
}
#cartBtn{
    position:fixed;
    top:20px;
    right:20px;
    background:#00cc66;
    color:white;
    padding:15px;
    border-radius:15px;
    cursor:pointer;
    font-weight:bold;
    box-shadow:0 0 10px rgba(0,0,0,0.4);
}
#cartPanel{
    position:fixed;
    top:0;
    right:0;
    width:320px;
    height:100%;
    background:white;
    box-shadow:-5px 0 15px rgba(0,0,0,0.3);
    padding:15px;
    display:none;
    flex-direction:column;
}
#cartPanel h2{
    text-align:center;
}
.cartItem{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin:8px 0;
    padding:8px;
    border-bottom:1px solid #ddd;
}
.cartItem button{
    border:none;
    padding:5px 8px;
    border-radius:8px;
    cursor:pointer;
}
.total{
    font-size:18px;
    font-weight:bold;
    margin-top:15px;
    text-align:center;
}
.actions button{
    width:100%;
    margin-top:10px;
    padding:12px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-size:16px;
    font-weight:bold;
}
.whatsapp{
    background:#25d366;
    color:white;
}
.pdf{
    background:#ffcc00;
}
.hide{
    background:#e60000;
    color:white;
}
</style>
</head>

<body>

<header>ğŸ‡¨ğŸ‡º Cuba Market ğŸ›’âœ¨</header>

<div class="info">
    ğŸ—ğŸ¥– Bienvenido a tu tienda de alimentos en CUP ğŸ’°  
    Selecciona productos y genera tu factura ğŸ§¾ğŸ“²
</div>

<div class="searchBox">
    ğŸ” <input type="text" id="search" placeholder="Buscar producto..." onkeyup="filtrar()">
</div>

<div class="products" id="listaProductos"></div>

<div id="cartBtn" onclick="mostrarCarrito()">ğŸ›’ Carrito (<span id="count">0</span>)</div>

<!-- PANEL CARRITO -->
<div id="cartPanel">
    <h2>ğŸ› Tu Carrito</h2>
    <div id="cartItems"></div>

    <div class="total">ğŸ’° Total: <span id="total">0</span> CUP</div>

    <div class="actions">
        <button class="whatsapp" onclick="enviarWhatsApp()">ğŸ“² Enviar Pedido</button>
        <button class="pdf" onclick="generarPDF()">ğŸ§¾ Descargar Factura PDF</button>
        <button class="hide" onclick="ocultarCarrito()">âŒ Ocultar</button>
    </div>
</div>

<script>
/* ğŸ–¼ IMAGEN BASE64 GENÃ‰RICA */
let placeholder = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAA...";

/* ğŸ›’ PRODUCTOS (PRECIOS EJEMPLO CUBA) */
let productos = [
 {nombre:"ğŸ— Pollo (1kg)", precio:1200, img:placeholder},
 {nombre:"ğŸš Arroz (1kg)", precio:350, img:placeholder},
 {nombre:"ğŸª Galletas", precio:250, img:placeholder},
 {nombre:"ğŸ¬ AzÃºcar (1kg)", precio:300, img:placeholder},
 {nombre:"ğŸ›¢ Aceite (1L)", precio:1800, img:placeholder},
 {nombre:"ğŸ¥– Pan", precio:150, img:placeholder},
 {nombre:"ğŸ¥š Huevos (10)", precio:900, img:placeholder}
];

let carrito = {};

/* MOSTRAR PRODUCTOS */
function renderProductos(lista){
 let cont = document.getElementById("listaProductos");
 cont.innerHTML="";
 lista.forEach((p,i)=>{
   cont.innerHTML += `
    <div class="card">
      <img src="${p.img}">
      <h3>${p.nombre}</h3>
      <p>ğŸ’° ${p.precio} CUP</p>
      <button onclick="agregar(${i})">â• AÃ±adir</button>
    </div>
   `;
 });
}
renderProductos(productos);

/* BUSCADOR */
function filtrar(){
 let texto = document.getElementById("search").value.toLowerCase();
 let filtrados = productos.filter(p=>p.nombre.toLowerCase().includes(texto));
 renderProductos(filtrados);
}

/* AGREGAR */
function agregar(i){
 let prod = productos[i];
 if(!carrito[prod.nombre]) carrito[prod.nombre]={...prod,cant:0};
 carrito[prod.nombre].cant++;
 actualizar();
}

/* ACTUALIZAR */
function actualizar(){
 let items = document.getElementById("cartItems");
 items.innerHTML="";
 let total=0;
 let count=0;

 Object.values(carrito).forEach(p=>{
   total += p.precio*p.cant;
   count += p.cant;

   items.innerHTML += `
    <div class="cartItem">
      ${p.nombre} x${p.cant}
      <div>
        <button onclick="sumar('${p.nombre}')">â•</button>
        <button onclick="restar('${p.nombre}')">â–</button>
        <button onclick="eliminar('${p.nombre}')">âŒ</button>
      </div>
    </div>
   `;
 });

 document.getElementById("total").innerText=total;
 document.getElementById("count").innerText=count;
}

/* CONTROLES */
function sumar(n){carrito[n].cant++; actualizar();}
function restar(n){
 carrito[n].cant--;
 if(carrito[n].cant<=0) delete carrito[n];
 actualizar();
}
function eliminar(n){delete carrito[n]; actualizar();}

/* MOSTRAR/OCULTAR */
function mostrarCarrito(){document.getElementById("cartPanel").style.display="flex";}
function ocultarCarrito(){document.getElementById("cartPanel").style.display="none";}

/* WHATSAPP */
function enviarWhatsApp(){
 let mensaje="ğŸ›’ Pedido Cuba Market:%0A";
 let total=0;
 Object.values(carrito).forEach(p=>{
   mensaje += `${p.nombre} x${p.cant} = ${p.precio*p.cant} CUP%0A`;
   total += p.precio*p.cant;
 });
 mensaje += `%0AğŸ’° Total: ${total} CUP`;
 window.open("https://wa.me/58752291?text="+mensaje);
}

/* PDF SIMPLE */
function generarPDF(){
 let total=document.getElementById("total").innerText;
 alert("ğŸ“Œ Factura PDF generada (modo demo). Para PDF real se integra reportlab o jsPDF.");
}
</script>

</body>
    </html>
