<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ‡¨ğŸ‡º Cuba Market PRO ğŸ›’</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f7f7f7;
    color:#222;
}
header{
    background:linear-gradient(90deg,#e60000,#ffcc00);
    padding:20px;
    text-align:center;
    font-size:32px;
    font-weight:bold;
    color:white;
    text-shadow:0 0 8px black;
}
.info{
    text-align:center;
    padding:10px;
    font-size:18px;
}
.searchBox{
    text-align:center;
    margin:15px;
}
.searchBox input{
    width:80%;
    max-width:500px;
    padding:12px;
    border-radius:12px;
    border:2px solid #ffcc00;
    font-size:16px;
}
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:15px;
    padding:20px;
}
.card{
    background:white;
    border-radius:18px;
    padding:15px;
    box-shadow:0 0 10px rgba(0,0,0,0.2);
    text-align:center;
    transition:0.3s;
}
.card:hover{
    transform:scale(1.05);
}
.card button{
    margin-top:10px;
    padding:10px 15px;
    border:none;
    border-radius:12px;
    background:#ffcc00;
    font-weight:bold;
    cursor:pointer;
}
.card button:hover{
    background:#ffaa00;
}

#cartBtn{
    position:fixed;
    top:20px;
    right:20px;
    background:#00cc66;
    color:white;
    padding:15px;
    border-radius:15px;
    cursor:pointer;
    font-weight:bold;
    box-shadow:0 0 10px rgba(0,0,0,0.4);
}

#cartPanel{
    position:fixed;
    top:0;
    right:0;
    width:360px;
    height:100%;
    background:white;
    box-shadow:-5px 0 15px rgba(0,0,0,0.3);
    padding:15px;
    display:none;
    flex-direction:column;
    overflow-y:auto;
}

.cartItem{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin:8px 0;
    padding:8px;
    border-bottom:1px solid #ddd;
}

.cartItem button{
    border:none;
    padding:5px 8px;
    border-radius:8px;
    cursor:pointer;
}

.total{
    font-size:18px;
    font-weight:bold;
    margin-top:15px;
    text-align:center;
}

.payBox{
    margin-top:15px;
    padding:10px;
    border-radius:12px;
    background:#f0f0f0;
}

.payBox select{
    width:100%;
    padding:10px;
    border-radius:10px;
}

.actions button{
    width:100%;
    margin-top:10px;
    padding:12px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-size:16px;
    font-weight:bold;
}

.whatsapp{background:#25d366;color:white;}
.pdf{background:#ffcc00;}
.hide{background:#e60000;color:white;}
.pay{background:#0066ff;color:white;}
</style>
</head>

<body>

<header>ğŸ‡¨ğŸ‡º Cuba Market PRO ğŸ›’âœ¨</header>

<div class="info">
ğŸ—ğŸ¥– Tienda de alimentos en CUP + Pagos Online ğŸ’³  
Factura PDF + Comprobante de Pago ğŸ§¾
</div>

<div class="searchBox">
ğŸ” <input type="text" id="search" placeholder="Buscar producto..." onkeyup="filtrar()">
</div>

<div class="products" id="listaProductos"></div>

<div id="cartBtn" onclick="mostrarCarrito()">ğŸ›’ Carrito (<span id="count">0</span>)</div>

<!-- PANEL CARRITO -->
<div id="cartPanel">
    <h2 style="text-align:center;">ğŸ› Tu Carrito</h2>
    <div id="cartItems"></div>

    <div class="total">ğŸ’° Total: <span id="total">0</span> CUP</div>

    <!-- PAGOS -->
    <div class="payBox">
        <h3>ğŸ’³ MÃ©todo de Pago</h3>
        <select id="metodoPago" onchange="mostrarCuenta()">
            <option value="">-- Seleccionar --</option>
            <option value="CRIPTO">ğŸª™ CRIPTO</option>
            <option value="CUP">ğŸ‡¨ğŸ‡º CUP</option>
            <option value="USD">ğŸ’µ USD</option>
            <option value="MLC">ğŸ¦ MLC</option>
            <option value="CLASICA">ğŸ’³ CLÃSICA</option>
        </select>

        <p id="cuentaInfo" style="margin-top:10px;font-weight:bold;"></p>

        <button class="pay" onclick="realizarPago()">âœ… Realizar pago a esta cuenta</button>
        <button class="pdf" onclick="comprobantePago()">ğŸ§¾ Descargar Comprobante PDF</button>
    </div>

    <!-- ACCIONES -->
    <div class="actions">
        <button class="whatsapp" onclick="enviarWhatsApp()">ğŸ“² Enviar Pedido</button>
        <button class="pdf" onclick="facturaPDF()">ğŸ§¾ Descargar Factura PDF</button>
        <button class="hide" onclick="ocultarCarrito()">âŒ Ocultar</button>
    </div>
</div>

<script>
/* PRODUCTOS */
let productos = [
 {nombre:"ğŸ— Pollo (1kg)", precio:1200},
 {nombre:"ğŸš Arroz (1kg)", precio:350},
 {nombre:"ğŸª Galletas", precio:250},
 {nombre:"ğŸ¬ AzÃºcar (1kg)", precio:300},
 {nombre:"ğŸ›¢ Aceite (1L)", precio:1800},
 {nombre:"ğŸ¥– Pan", precio:150},
 {nombre:"ğŸ¥š Huevos (10)", precio:900},

 /* +15 EXTRA */
 {nombre:"ğŸ§€ Queso (250g)", precio:800},
 {nombre:"ğŸ¥› Leche en polvo", precio:2200},
 {nombre:"ğŸ Espaguetis", precio:450},
 {nombre:"ğŸ¥« Pasta de tomate", precio:600},
 {nombre:"ğŸ« Chocolate", precio:500},
 {nombre:"ğŸ Manzanas (1lb)", precio:700},
 {nombre:"ğŸŒ PlÃ¡tanos (1lb)", precio:250},
 {nombre:"ğŸ¥© Carne de cerdo (1kg)", precio:2500},
 {nombre:"ğŸŸ Pescado (1kg)", precio:2000},
 {nombre:"ğŸ¯ Miel", precio:1500},
 {nombre:"ğŸ§‚ Sal", precio:120},
 {nombre:"â˜• CafÃ©", precio:1800},
 {nombre:"ğŸ¥¤ Refresco", precio:300},
 {nombre:"ğŸ Pan suave", precio:200},
 {nombre:"ğŸ¬ Caramelos", precio:180}
];

let carrito = {};
let cuentas = {
 "CRIPTO":"Wallet USDT: TX9A-88FF-CRP",
 "CUP":"Cuenta CUP: 9201-4455-7788",
 "USD":"Cuenta USD: 1100-9922-3344",
 "MLC":"Tarjeta MLC: 5500-2233-8899",
 "CLASICA":"Cuenta ClÃ¡sica: 7777-1111-2222"
};

/* MOSTRAR PRODUCTOS */
function renderProductos(lista){
 let cont=document.getElementById("listaProductos");
 cont.innerHTML="";
 lista.forEach((p,i)=>{
   cont.innerHTML+=`
    <div class="card">
      <h3>${p.nombre}</h3>
      <p>ğŸ’° ${p.precio} CUP</p>
      <button onclick="agregar(${i})">â• AÃ±adir</button>
    </div>`;
 });
}
renderProductos(productos);

/* BUSCADOR */
function filtrar(){
 let texto=document.getElementById("search").value.toLowerCase();
 renderProductos(productos.filter(p=>p.nombre.toLowerCase().includes(texto)));
}

/* CARRITO */
function agregar(i){
 let prod=productos[i];
 if(!carrito[prod.nombre]) carrito[prod.nombre]={...prod,cant:0};
 carrito[prod.nombre].cant++;
 actualizar();
}

function actualizar(){
 let items=document.getElementById("cartItems");
 items.innerHTML="";
 let total=0,count=0;

 Object.values(carrito).forEach(p=>{
   total+=p.precio*p.cant;
   count+=p.cant;

   items.innerHTML+=`
    <div class="cartItem">
      ${p.nombre} x${p.cant}
      <div>
        <button onclick="sumar('${p.nombre}')">â•</button>
        <button onclick="restar('${p.nombre}')">â–</button>
        <button onclick="eliminar('${p.nombre}')">âŒ</button>
      </div>
    </div>`;
 });

 document.getElementById("total").innerText=total;
 document.getElementById("count").innerText=count;
}

function sumar(n){carrito[n].cant++; actualizar();}
function restar(n){carrito[n].cant--; if(carrito[n].cant<=0) delete carrito[n]; actualizar();}
function eliminar(n){delete carrito[n]; actualizar();}

/* MOSTRAR/OCULTAR */
function mostrarCarrito(){document.getElementById("cartPanel").style.display="flex";}
function ocultarCarrito(){document.getElementById("cartPanel").style.display="none";}

/* WHATSAPP */
function enviarWhatsApp(){
 let mensaje="ğŸ›’ Pedido Cuba Market:%0A";
 let total=0;
 Object.values(carrito).forEach(p=>{
   mensaje+=`${p.nombre} x${p.cant} = ${p.precio*p.cant} CUP%0A`;
   total+=p.precio*p.cant;
 });
 mensaje+=`%0AğŸ’° Total: ${total} CUP`;
 window.open("https://wa.me/58752291?text="+mensaje);
}

/* CUENTAS */
function mostrarCuenta(){
 let metodo=document.getElementById("metodoPago").value;
 document.getElementById("cuentaInfo").innerText = metodo ? "ğŸ“Œ "+cuentas[metodo] : "";
}

/* PAGO */
function realizarPago(){
 let metodo=document.getElementById("metodoPago").value;
 if(!metodo){alert("Selecciona un mÃ©todo de pago"); return;}
 alert("âœ… Pago iniciado a: "+cuentas[metodo]);
}

/* FACTURA PDF DEMO */
function facturaPDF(){
 let texto="FACTURA CUBA MARKET\n\n";
 Object.values(carrito).forEach(p=>{
   texto+=`${p.nombre} x${p.cant} = ${p.precio*p.cant} CUP\n`;
 });
 texto+="\nTOTAL: "+document.getElementById("total").innerText+" CUP";
 descargarArchivo(texto,"factura.pdf");
}

/* COMPROBANTE PDF DEMO */
function comprobantePago(){
 let metodo=document.getElementById("metodoPago").value;
 if(!metodo){alert("Selecciona mÃ©todo primero"); return;}
 let texto="COMPROBANTE DE PAGO\n\n";
 texto+="MÃ©todo: "+metodo+"\n";
 texto+="Cuenta destino: "+cuentas[metodo]+"\n";
 texto+="Monto: "+document.getElementById("total").innerText+" CUP\n";
 texto+="\nGracias por tu compra ğŸ‡¨ğŸ‡ºâœ¨";
 descargarArchivo(texto,"comprobante.pdf");
}

/* DESCARGA SIMPLE */
function descargarArchivo(contenido,nombre){
 let blob=new Blob([contenido],{type:"application/pdf"});
 let link=document.createElement("a");
 link.href=URL.createObjectURL(blob);
 link.download=nombre;
 link.click();
}
</script>

</body>
    </html>
